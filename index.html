<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.314">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-08-31">

<title>UK domestic energy costs calculator: Oct 2022 to Sept 2023</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script type="module" src="index_files/libs/quarto-ojs/esbuild-bundle.js"></script>
<link href="index_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="extra.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#your-consumption" id="toc-your-consumption" class="nav-link active" data-scroll-target="#your-consumption">Your consumption</a></li>
  <li><a href="#your-results" id="toc-your-results" class="nav-link" data-scroll-target="#your-results">Your results</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#estimating-energy-usage" id="toc-estimating-energy-usage" class="nav-link" data-scroll-target="#estimating-energy-usage">Estimating energy usage</a></li>
  <li><a href="#estimating-energy-costs" id="toc-estimating-energy-costs" class="nav-link" data-scroll-target="#estimating-energy-costs">Estimating energy costs</a></li>
  <li><a href="#why-are-your-figures-different-from-x-y-z" id="toc-why-are-your-figures-different-from-x-y-z" class="nav-link" data-scroll-target="#why-are-your-figures-different-from-x-y-z">Why are your figures different from X, Y, Z</a></li>
  <li><a href="#further-information" id="toc-further-information" class="nav-link" data-scroll-target="#further-information">Further information</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">UK domestic energy costs calculator: Oct 2022 to Sept 2023</h1>
</div>





<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">31 August 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>The purpose of this webpage is to provide a simple calculation of likely monthly energy costs for UK domestic energy customers from October 2022 to September 2023 based on a given level of energy consumption using public domain information about future domestic energy prices.</p>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Estimated cost is not actual cost
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is an indicative simulation of potential energy costs; it is not designed or intended to accurately predict costs, see the <a href="#methodolgy">methodology</a> for more details.</p>
</div>
</div>
<section id="your-consumption" class="level2">
<h2 class="anchored" data-anchor-id="your-consumption">Your consumption</h2>
<p>Use the input/sliders below to provide your annual energy usage in kilowatt-hours (kWh), you can find this on the latest bill from your energy supplier. The defaults provided here represent the figures used in the Ofgem price cap methodology for the average household (3,100 kWh for electricity and 12,000 kWh for gas).</p>
<div class="cell panel-input card bg-light p-2" data-layout-ncol="2">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="46" data-source-offset="-53"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 45;"><span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>viewof elec_usage <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">0</span><span class="op">,</span> <span class="dv">20000</span>]<span class="op">,</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">label</span><span class="op">:</span> <span class="st">"Annual electricity consumption (kWh):"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">3100</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">100</span>}</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>viewof gas_usage <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">0</span><span class="op">,</span> <span class="dv">20000</span>]<span class="op">,</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">label</span><span class="op">:</span> <span class="st">"Annual gas consumption (kWh):"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">12000</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">100</span>}</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="your-results" class="level2">
<h2 class="anchored" data-anchor-id="your-results">Your results</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="62" data-source-offset="-34"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 61;"><span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { aq<span class="op">,</span> op } <span class="im">from</span> <span class="st">'@uwdata/arquero'</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>locale <span class="op">=</span> d3<span class="op">.</span><span class="fu">formatDefaultLocale</span>({</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="st">"decimal"</span><span class="op">:</span> <span class="st">"."</span><span class="op">,</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>  <span class="st">"thousands"</span><span class="op">:</span> <span class="st">","</span><span class="op">,</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>  <span class="st">"grouping"</span><span class="op">:</span> [<span class="dv">3</span>]<span class="op">,</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="st">"currency"</span><span class="op">:</span> [<span class="st">"£"</span><span class="op">,</span> <span class="st">""</span>]</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>gbp_format <span class="op">=</span> locale<span class="op">.</span><span class="fu">format</span>(<span class="st">"$,.0f"</span>)</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>month_format <span class="op">=</span> d3<span class="op">.</span><span class="fu">timeFormat</span>(<span class="st">"%b-%y"</span>)</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>cost_simulator <span class="op">=</span> aq<span class="op">.</span><span class="fu">loadCSV</span>(<span class="st">"data/cost_simulator.csv"</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>elec_cost <span class="op">=</span> cost_simulator</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">params</span>({ <span class="dt">usage</span><span class="op">:</span> elec_usage })</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">fuel</span> <span class="op">==</span> <span class="st">"electricity"</span>)</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">derive</span>({ <span class="dt">my_usage</span><span class="op">:</span> aq<span class="op">.</span><span class="fu">escape</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">prop</span> <span class="op">*</span> elec_usage )})</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">derive</span>({ <span class="dt">my_cost</span> <span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">my_usage</span> <span class="op">*</span> d<span class="op">.</span><span class="at">cap</span>})</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>gas_cost <span class="op">=</span> cost_simulator</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">fuel</span> <span class="op">==</span> <span class="st">"gas"</span>)</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">derive</span>({ <span class="dt">my_usage</span><span class="op">:</span> aq<span class="op">.</span><span class="fu">escape</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">prop</span> <span class="op">*</span> gas_usage )})</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">derive</span>({ <span class="dt">my_cost</span> <span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">my_usage</span> <span class="op">*</span> d<span class="op">.</span><span class="at">cap</span>})</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>my_cost_simulator <span class="op">=</span> elec_cost</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">concat</span>(gas_cost)</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>total_cost <span class="op">=</span> aq<span class="op">.</span><span class="fu">agg</span>(my_cost_simulator<span class="op">,</span> op<span class="op">.</span><span class="fu">sum</span>(<span class="st">"my_cost"</span>))</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>monthly_costs <span class="op">=</span> my_cost_simulator</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">groupby</span>(<span class="st">"ref_month"</span>)</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rollup</span>({ <span class="dt">my_cost</span><span class="op">:</span> d <span class="kw">=&gt;</span> op<span class="op">.</span><span class="fu">sum</span>(d<span class="op">.</span><span class="at">my_cost</span>) })</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>month_max <span class="op">=</span> aq<span class="op">.</span><span class="fu">agg</span>(monthly_costs<span class="op">,</span> op<span class="op">.</span><span class="fu">max</span>(<span class="st">"my_cost"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-2-12" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="102" data-source-offset="-17"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 101;"><span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The estimated annual cost for energy based on the electricity and gas</span></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a><span class="vs">consumption supplied is: **</span><span class="sc">${</span><span class="fu">gbp_format</span>(total_cost)<span class="sc">}</span><span class="vs">**. Below you can find </span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a><span class="vs">charts showing the estimated cost and usage, as well as a table of the results.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Cost chart</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Usage chart</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Table</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="131" data-source-offset="-520"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 130;"><span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> month_max <span class="op">+</span> <span class="dv">100</span>]<span class="op">,</span> </span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="fu">gbp_format</span>(d)<span class="op">,</span></span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span> </span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> <span class="st">"%b-%y"</span><span class="op">,</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(my_cost_simulator<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"ref_month"</span><span class="op">,</span> </span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">y</span><span class="op">:</span> <span class="st">"my_cost"</span><span class="op">,</span></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">fill</span><span class="op">:</span><span class="st">"fuel"</span>})<span class="op">,</span></span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(monthly_costs<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"ref_month"</span><span class="op">,</span></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">y</span><span class="op">:</span> <span class="st">"my_cost"</span><span class="op">,</span></span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="fu">gbp_format</span>(d<span class="op">.</span><span class="at">my_cost</span>)<span class="op">,</span></span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">10</span><span class="op">,</span></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span>})</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="st">"electricity"</span><span class="op">,</span> <span class="st">"gas"</span>]<span class="op">,</span> </span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#E8C027"</span><span class="op">,</span> <span class="st">"#1092E8"</span>]</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-cost-chart" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 1: Estimated monthly energy costs</figcaption><p></p>
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</figure>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="175" data-source-offset="-521"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 174;"><span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { </span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span> </span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span></span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> <span class="st">"%b-%y"</span><span class="op">,</span></span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span></span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a>  <span class="dt">facet</span><span class="op">:</span> {</span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span> my_cost_simulator<span class="op">,</span></span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="st">"fuel"</span><span class="op">,</span></span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span></span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(my_cost_simulator<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"ref_month"</span><span class="op">,</span> </span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">y</span><span class="op">:</span> <span class="st">"my_usage"</span><span class="op">,</span></span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">fill</span><span class="op">:</span><span class="st">"fuel"</span>})<span class="op">,</span></span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(my_cost_simulator<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"ref_month"</span><span class="op">,</span></span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">y</span><span class="op">:</span> <span class="st">"my_usage"</span><span class="op">,</span></span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">my_usage</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">10</span><span class="op">,</span></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span>})</span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="st">"electricity"</span><span class="op">,</span> <span class="st">"gas"</span>]<span class="op">,</span> </span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#E8C027"</span><span class="op">,</span> <span class="st">"#1092E8"</span>]</span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-usage-chart" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 2: Estimated monthly energy costs</figcaption><p></p>
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</figure>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-tbl-cap="Estimated monthly energy costs">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="208" data-source-offset="-61"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 207;"><span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>monthly_costs_out <span class="op">=</span> elec_cost</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">select</span>(<span class="st">"ref_month"</span><span class="op">,</span> <span class="st">"my_usage"</span><span class="op">,</span> <span class="st">"my_cost"</span>)</span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rename</span>({ <span class="dt">my_usage</span><span class="op">:</span> <span class="st">"elec_usage"</span><span class="op">,</span> <span class="dt">my_cost</span><span class="op">:</span> <span class="st">"elec_cost"</span> })</span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">join_full</span>(</span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a>    gas_cost</span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">select</span>(<span class="st">"ref_month"</span><span class="op">,</span> <span class="st">"my_usage"</span><span class="op">,</span> <span class="st">"my_cost"</span>)</span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">rename</span>({ <span class="dt">my_usage</span><span class="op">:</span> <span class="st">"gas_usage"</span><span class="op">,</span> <span class="dt">my_cost</span><span class="op">:</span> <span class="st">"gas_cost"</span> })<span class="op">,</span></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ref_month"</span></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">derive</span>({ <span class="dt">total_cost</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">elec_cost</span> <span class="op">+</span> d<span class="op">.</span><span class="at">gas_cost</span> })</span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">select</span>(<span class="st">"ref_month"</span><span class="op">,</span> <span class="st">"elec_usage"</span><span class="op">,</span> <span class="st">"gas_usage"</span><span class="op">,</span> <span class="st">"elec_cost"</span><span class="op">,</span> <span class="st">"gas_cost"</span><span class="op">,</span> <span class="st">"total_cost"</span>)</span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">rename</span>({</span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ref_month</span><span class="op">:</span> <span class="st">"Month"</span><span class="op">,</span> </span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>    <span class="dt">elec_usage</span><span class="op">:</span> <span class="st">"Electricity (kWh)"</span><span class="op">,</span> </span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>    <span class="dt">gas_usage</span><span class="op">:</span> <span class="st">"Gas (kWh)"</span><span class="op">,</span></span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>    <span class="dt">elec_cost</span><span class="op">:</span> <span class="st">"Electricity (£)"</span><span class="op">,</span> </span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>    <span class="dt">gas_cost</span><span class="op">:</span> <span class="st">"Gas (£)"</span><span class="op">,</span> </span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a>    <span class="dt">total_cost</span><span class="op">:</span> <span class="st">"Total cost (£)"</span></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(monthly_costs_out<span class="op">.</span><span class="fu">objects</span>()<span class="op">,</span> {</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>  <span class="dt">format</span><span class="op">:</span> {</span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Month"</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">month_format</span>(x)<span class="op">,</span></span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Electricity (kWh)"</span><span class="op">:</span> x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>) <span class="op">+</span> <span class="st">" kWh"</span><span class="op">,</span> </span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gas (kWh)"</span><span class="op">:</span> x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>) <span class="op">+</span> <span class="st">" kWh"</span><span class="op">,</span></span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Electricity (£)"</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">gbp_format</span>(x)<span class="op">,</span> </span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gas (£)"</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">gbp_format</span>(x)<span class="op">,</span> </span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Total cost (£)"</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">gbp_format</span>(x)</span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rows</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a>  <span class="dt">layout</span><span class="op">:</span> <span class="st">"auto"</span></span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>On Friday 26 August 2021 Ofgem, the UK energy regulator, <a href="https://www.theguardian.com/money/2022/aug/26/ofgem-raises-energy-price-cap-to-3549">announced a rise</a> in the price cap for domestic energy. On the same day, energy consultancy <a href="https://www.cornwall-insight.com/press/cornwall-insight-comments-on-the-announcement-of-the-october-price-cap/">Cornwall Insight released updated forecasts</a> for the future values of Ofgem’s price cap in 2023 showing massive increases in household bills.</p>
<p>Reporting on the price cap has largely been focussed on the estimate of the annual cost for the “average” domestic customer, which for the new price cap is estimated as £3,549. While averages can be useful indicators they do not help customers understand their own situation. Similarly, the annual figure does not necessarily help customers understand their potential costs, especially as we head into the most energy intensive period of the year, and have significant increases forecast in the price cap going forward.</p>
<p>This calculator provides a simple approach to estimate energy costs using Ofgem’s announced price cap for October 2022 to December 2022 and Cornwall Insight’s forecasts of changes to the price cap for January 2023 through to September 2023.</p>
<section id="estimating-energy-usage" class="level3">
<h3 class="anchored" data-anchor-id="estimating-energy-usage">Estimating energy usage</h3>
<p>The calculator uses overall UK electricity consumption<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and gas supply<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> figures published by the Department for Business Energy and Industrial Strategy (BEIS) to estimate the pattern of energy usage throughout the year. This is done by calculating the relative energy use by fuel for each month of each calendar year from 2010 to 2021, see <a href="#fig-relative-usage">Figure&nbsp;3</a>.</p>
<p>An average of these relative monthly consumption figures is then taken, to smooth out fluctuations in annual figures due to different weather patterns, and then converted to a proportion of annual energy consumption for each fuel. These proportions are then applied to the user provided annual electricity and gas consumption, to estimate usage by month.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="281" data-source-offset="-34"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 280;"><span id="cb7-281"><a href="#cb7-281" aria-hidden="true" tabindex="-1"></a>energy_trends <span class="op">=</span> aq<span class="op">.</span><span class="fu">loadCSV</span>(<span class="st">"data/energy_trends.csv"</span>)</span>
<span id="cb7-282"><a href="#cb7-282" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">"J"</span><span class="op">,</span> <span class="st">"F"</span><span class="op">,</span> <span class="st">"M"</span><span class="op">,</span> <span class="st">"A"</span><span class="op">,</span> <span class="st">"M"</span><span class="op">,</span> <span class="st">"J"</span><span class="op">,</span> <span class="st">"J"</span><span class="op">,</span> <span class="st">"A"</span><span class="op">,</span> <span class="st">"S"</span><span class="op">,</span> <span class="st">"O"</span><span class="op">,</span> <span class="st">"N"</span><span class="op">,</span> <span class="st">"D"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-7-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-7-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="290" data-source-offset="-89"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 289;"><span id="cb8-290"><a href="#cb8-290" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb8-291"><a href="#cb8-291" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb8-292"><a href="#cb8-292" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb8-293"><a href="#cb8-293" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb8-294"><a href="#cb8-294" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> <span class="st">"0%"</span></span>
<span id="cb8-295"><a href="#cb8-295" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-296"><a href="#cb8-296" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb8-297"><a href="#cb8-297" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb8-298"><a href="#cb8-298" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ticks</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb8-299"><a href="#cb8-299" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> months[d <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb8-300"><a href="#cb8-300" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-301"><a href="#cb8-301" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb8-302"><a href="#cb8-302" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb8-303"><a href="#cb8-303" aria-hidden="true" tabindex="-1"></a>  <span class="dt">facet</span><span class="op">:</span> {</span>
<span id="cb8-304"><a href="#cb8-304" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span> energy_trends<span class="op">,</span></span>
<span id="cb8-305"><a href="#cb8-305" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="st">"fuel"</span><span class="op">,</span></span>
<span id="cb8-306"><a href="#cb8-306" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">""</span></span>
<span id="cb8-307"><a href="#cb8-307" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-308"><a href="#cb8-308" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb8-309"><a href="#cb8-309" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(energy_trends<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"month"</span><span class="op">,</span> </span>
<span id="cb8-310"><a href="#cb8-310" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">y</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span></span>
<span id="cb8-311"><a href="#cb8-311" aria-hidden="true" tabindex="-1"></a>                                  <span class="dt">stroke</span><span class="op">:</span><span class="st">"fuel"</span>})<span class="op">,</span></span>
<span id="cb8-312"><a href="#cb8-312" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">lineY</span>(</span>
<span id="cb8-313"><a href="#cb8-313" aria-hidden="true" tabindex="-1"></a>      energy_trends<span class="op">,</span></span>
<span id="cb8-314"><a href="#cb8-314" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">groupX</span>({<span class="dt">y</span><span class="op">:</span> <span class="st">"mean"</span>}<span class="op">,</span> {<span class="dt">y</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"month"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"fuel"</span><span class="op">,</span></span>
<span id="cb8-315"><a href="#cb8-315" aria-hidden="true" tabindex="-1"></a>        <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">curve</span><span class="op">:</span> <span class="st">"basis"</span>})<span class="op">,</span></span>
<span id="cb8-316"><a href="#cb8-316" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-317"><a href="#cb8-317" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb8-318"><a href="#cb8-318" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb8-319"><a href="#cb8-319" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb8-320"><a href="#cb8-320" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb8-321"><a href="#cb8-321" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="st">"electricity"</span><span class="op">,</span> <span class="st">"gas"</span>]<span class="op">,</span> </span>
<span id="cb8-322"><a href="#cb8-322" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#E8C027"</span><span class="op">,</span> <span class="st">"#1092E8"</span>]</span>
<span id="cb8-323"><a href="#cb8-323" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-324"><a href="#cb8-324" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-relative-usage" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 3: Relative energy monthly usage</figcaption><p></p>
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</figure>
</div>
</div>
<div class="callout-important callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Estimated usage is not actual usage
</div>
</div>
<div class="callout-body-container callout-body">
<p>Even though you can provide your own annual energy consumption the monthly estimates are unlikely to accurately predict how your energy consumption varies over the year. The underlying statistics are for total UK energy usage, so including both industrial, commercial and domestic uses.</p>
<p>Your energy use will also vary by the size of your household as well as the size, age and construction of your property.</p>
</div>
</div>
</section>
<section id="estimating-energy-costs" class="level3">
<h3 class="anchored" data-anchor-id="estimating-energy-costs">Estimating energy costs</h3>
<p>There are two sources for future energy costs: (i) Ofgem’s announced price cap for October 2022 to December 2022, and (ii) Cornwall Insight’s forecast of the future value of the price cap that will apply from January 2023 to September 2023.</p>
<p>Ofgem’s methodology for calculating the energy price cap is very complicated, and the price cap that applies to your energy bill will vary depending on the region of the UK you live in as well as how you pay for your electricity. This calculator uses the GB average figures provided in the Ofgem pricing model spreadsheet for the “Other methods” payment method (e.g.&nbsp;direct debit payment), specifically £1,693.02 for electricity and £1,785.66 for gas. For simplicity of calculation, and comparison with the Cornwall Insight figures, the annual standing charges of £104 for gas and £169 for electricity have been added to the variable aspect of the Ofgem cap for each fuel.</p>
<p>Cornwall Insight have published regular forecasts for the price cap for dual-fuel direct debit customers in recent months, the latest<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> being released the same day as the Ofgem price cap rise was announced. Their latest forecast is of a price cap of £5,387 for January 2023 to March 2023, £6,616 for April 2023 to June 2023, and £5,897 for July 2023 to September 2023.</p>
<p>The Cornwall Insight figures are translated into separate figures for gas and electricity by using the fuel mix implied by the methodology of the Ofgem model spreadsheet’s indicative dual-fuel cost, that is 51.3% gas and 48.7% electricity.</p>
<p>The values of the cap for gas and electricity are then converted into implied per kWh costs using the Ofgem model annual consumption assumption of 3,100 kWh for electricity and 12,000 kWh for gas.</p>
<p>These unit costs are then applied to the estimated usage to generate monthly costs per fuel, which are then aggregated to calculate the monthly and annual total cost.</p>
<div class="callout-important callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Estimated cost is not actual cost
</div>
</div>
<div class="callout-body-container callout-body">
<p>The specific level of the price cap that applies to you depends on where you live and your payment method. The price cap is a cap on the unit price of energy, it is not a cap on the maximum amount you will pay, the more energy you use the more you will pay.</p>
<p>The price cap figures used are GB average figures, each energy supply region has its own cap. Based on figures in the published Ofgem model, if you pay via prepayment meter your costs could be around 2% higher, if you pay on receipt of a bill from your provide your costs could be around 6% higher.</p>
<p>Energy companies are still studying the price cap announcement and it is unclear what specific prices they will charge their customers.</p>
<p>This calculator does not take account of any of the government’s support measures for energy bill support or the cost of living.</p>
<p>The Cornwall Insight forecasts of the price are not guaranteed, they are estimates based on forecasts of future wholesale energy costs and other inputs to the Ofgem price cap modelling. These forecasts may rise further if wholesale energy prices continue to rise, or they may reduce if future wholesale energy prices do not rise as high as forecast.</p>
</div>
</div>
</section>
<section id="why-are-your-figures-different-from-x-y-z" class="level3">
<h3 class="anchored" data-anchor-id="why-are-your-figures-different-from-x-y-z">Why are your figures different from X, Y, Z</h3>
<p>Largely it will be a difference of methodology. The sections above explain the steps taken to build the calculator and the code is open source. It has not been possible to review the specific methodology/code driving other calculators.</p>
</section>
<section id="further-information" class="level3">
<h3 class="anchored" data-anchor-id="further-information">Further information</h3>
<p>The code for the this calculator is published on <a href="https://github.com/mattkerlogue/energy-cost-simulator">Github</a> and a more detailed discussion of the methodology can be <a href="https://lapsedgeographer.london/2022-08/energy-costs/">read here</a>.</p>
</section>
</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>Electricity consumption figures are sourced from <a href="https://www.gov.uk/government/statistics/electricity-section-5-energy-trends">Energy Trends table 5.5</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>Gas supply figures are sourced from <a href="https://www.gov.uk/government/statistics/gas-section-4-energy-trends">Energy Trends table 4.2</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><a href="https://www.cornwall-insight.com/press/cornwall-insight-comments-on-the-announcement-of-the-october-price-cap/">Cornwall Insight figures</a> quoted in <a href="https://www.theguardian.com/money/2022/aug/26/ofgem-raises-energy-price-cap-to-3549">The Guardian</a> and by <a href="https://twitter.com/faisalislam/status/1563049747354910720">Faisal Islam</a> on Twitter.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"//| echo: false\n//| panel: input\n//| layout-ncol: 2\n\nviewof elec_usage = Inputs.range(\n  [0, 20000],\n  { label: \"Annual electricity consumption (kWh):\", value: 3100, step: 100}\n)\n\nviewof gas_usage = Inputs.range(\n  [0, 20000],\n  { label: \"Annual gas consumption (kWh):\", value: 12000, step: 100}\n)\n\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"//| echo: false\n//| output: false\nimport { aq, op } from '@uwdata/arquero'\n\nd3 = require(\"d3@7\")\nlocale = d3.formatDefaultLocale({\n  \"decimal\": \".\",\n  \"thousands\": \",\",\n  \"grouping\": [3],\n  \"currency\": [\"£\", \"\"]\n})\ngbp_format = locale.format(\"$,.0f\")\nmonth_format = d3.timeFormat(\"%b-%y\")\n\ncost_simulator = aq.loadCSV(\"data/cost_simulator.csv\")\n\nelec_cost = cost_simulator\n  .params({ usage: elec_usage })\n  .filter(d => d.fuel == \"electricity\")\n  .derive({ my_usage: aq.escape(d => d.prop * elec_usage )})\n  .derive({ my_cost : d => d.my_usage * d.cap})\n  \ngas_cost = cost_simulator\n  .filter(d => d.fuel == \"gas\")\n  .derive({ my_usage: aq.escape(d => d.prop * gas_usage )})\n  .derive({ my_cost : d => d.my_usage * d.cap})\n  \nmy_cost_simulator = elec_cost\n  .concat(gas_cost)\n\ntotal_cost = aq.agg(my_cost_simulator, op.sum(\"my_cost\"))\n\nmonthly_costs = my_cost_simulator\n  .groupby(\"ref_month\")\n  .rollup({ my_cost: d => op.sum(d.my_cost) })\n\nmonth_max = aq.agg(monthly_costs, op.max(\"my_cost\"))\n\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"//| echo: false\n\nmd`The estimated annual cost for energy based on the electricity and gas\nconsumption supplied is: **${gbp_format(total_cost)}**. Below you can find \ncharts showing the estimated cost and usage, as well as a table of the results.`\n\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"//| echo: false\n//| label: fig-cost-chart\n//| fig-cap: Estimated monthly energy costs\n//| fig-alt: >\n//|   A column chart showing estimated monthly energy costs associated\n//|   with the provided energy consumption. Each column is comprised of two\n//|   stacked columns: the lower stack, in yellow, denotes the cost estimated\n//|   for electricity; the upper stack, in blue, denotes the cost estimated\n//|   for gas. A label above the column shows the monthly total, i.e. the\n//|   combined cost of gas and electricity.\nPlot.plot({\n  y: {\n    domain: [0, month_max + 100], \n    tickFormat: d => gbp_format(d),\n    label: \"\", \n  },\n  x: {\n    tickRotate: -90,\n    tickFormat: \"%b-%y\",\n    label: \"\"\n  },\n  marginBottom: 50,\n  grid: true,\n  marks: [\n    Plot.barY(my_cost_simulator, {x: \"ref_month\", \n                                  y: \"my_cost\",\n                                  fill:\"fuel\"}),\n    Plot.text(monthly_costs, {x: \"ref_month\",\n                                  y: \"my_cost\",\n                                  text: d => gbp_format(d.my_cost),\n                                  dy: -10,\n                                  fontWeight: \"bold\"})\n  ],\n  color: {\n    legend: true,\n    type: \"categorical\",\n    domain: [\"electricity\", \"gas\"], \n    range: [\"#E8C027\", \"#1092E8\"]\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"//| echo: false\n//| label: fig-usage-chart\n//| fig-cap: Estimated monthly energy costs\n//| fig-alt: >\n//|   A column chart showing estimated monthly energy costs associated\n//|   with the provided energy consumption. Each column is comprised of two\n//|   stacked columns: the lower stack, in yellow, denotes the cost estimated\n//|   for electricity; the upper stack, in blue, denotes the cost estimated\n//|   for gas. A label above the column shows the monthly total, i.e. the\n//|   combined cost of gas and electricity.\nPlot.plot({\n  y: { \n    tickFormat: d => d.toFixed(0),\n    label: \"\", \n  },\n  x: {\n    tickRotate: -90,\n    tickFormat: \"%b-%y\",\n    label: \"\"\n  },\n  facet: {\n    data: my_cost_simulator,\n    x: \"fuel\",\n    label: \"\"\n  },\n  marginBottom: 50,\n  grid: true,\n  marks: [\n    Plot.barY(my_cost_simulator, {x: \"ref_month\", \n                                  y: \"my_usage\",\n                                  fill:\"fuel\"}),\n    Plot.text(my_cost_simulator, {x: \"ref_month\",\n                                  y: \"my_usage\",\n                                  text: d => d.my_usage.toFixed(0),\n                                  dy: -10,\n                                  fontWeight: \"bold\"})\n  ],\n  color: {\n    legend: true,\n    type: \"categorical\",\n    domain: [\"electricity\", \"gas\"], \n    range: [\"#E8C027\", \"#1092E8\"]\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"//| echo: false\n//| tbl-cap: Estimated monthly energy costs\n\nmonthly_costs_out = elec_cost\n  .select(\"ref_month\", \"my_usage\", \"my_cost\")\n  .rename({ my_usage: \"elec_usage\", my_cost: \"elec_cost\" })\n  .join_full(\n    gas_cost\n      .select(\"ref_month\", \"my_usage\", \"my_cost\")\n      .rename({ my_usage: \"gas_usage\", my_cost: \"gas_cost\" }),\n    \"ref_month\"\n  )\n  .derive({ total_cost: d => d.elec_cost + d.gas_cost })\n  .select(\"ref_month\", \"elec_usage\", \"gas_usage\", \"elec_cost\", \"gas_cost\", \"total_cost\")\n  .rename({\n    ref_month: \"Month\", \n    elec_usage: \"Electricity (kWh)\", \n    gas_usage: \"Gas (kWh)\",\n    elec_cost: \"Electricity (£)\", \n    gas_cost: \"Gas (£)\", \n    total_cost: \"Total cost (£)\"\n  })\n\nInputs.table(monthly_costs_out.objects(), {\n  format: {\n    \"Month\": x => month_format(x),\n    \"Electricity (kWh)\": x => x.toFixed(0) + \" kWh\", \n    \"Gas (kWh)\": x => x.toFixed(0) + \" kWh\",\n    \"Electricity (£)\": x => gbp_format(x), \n    \"Gas (£)\": x => gbp_format(x), \n    \"Total cost (£)\": x => gbp_format(x)\n  },\n  rows: 20,\n  layout: \"auto\"\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"//| echo: false\n//| output: false\nenergy_trends = aq.loadCSV(\"data/energy_trends.csv\")\nmonths = [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"]\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"//| echo: false\n//| label: fig-relative-usage\n//| fig-cap: Relative energy monthly usage\nPlot.plot({\n  y: {\n    domain: [0, 1],\n    label: \"\",\n    tickFormat: \"0%\"\n  },\n  x: {\n    label: \"\",\n    ticks: 12,\n    tickFormat: d => months[d - 1]\n  },\n  marginBottom: 50,\n  grid: true,\n  facet: {\n    data: energy_trends,\n    x: \"fuel\",\n    label: \"\"\n  },\n  marks: [\n    Plot.dot(energy_trends, {x: \"month\", \n                                  y: \"value\",\n                                  stroke:\"fuel\"}),\n    Plot.lineY(\n      energy_trends,\n        Plot.groupX({y: \"mean\"}, {y: \"value\", x: \"month\", stroke: \"fuel\",\n        strokeWidth: 3, curve: \"basis\"}),\n    )\n  ],\n  color: {\n    legend: true,\n    type: \"categorical\",\n    domain: [\"electricity\", \"gas\"], \n    range: [\"#E8C027\", \"#1092E8\"]\n  }\n})\n"},{"methodName":"interpretQuiet","source":"shinyInput('elec_usage')"},{"methodName":"interpretQuiet","source":"shinyInput('gas_usage')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>